ANALYSIS SERVICE - DOCUMENTATION

Nom du fichier :
analysis_service.py

--------------------------------------------------

DESCRIPTION GENERALE

Ce service est un composant du projet d’échecs distribué basé sur RabbitMQ.
Il permet d’analyser une partie d’échecs en temps réel à partir des coups validés.

Le service ne joue pas.
Il n’arbitre pas.
Il analyse uniquement la position.

--------------------------------------------------

ROLE DU SERVICE

- Rejouer la partie à partir des coups validés
- Maintenir un plateau local indépendant
- Analyser chaque position avec le moteur Stockfish
- Fournir une évaluation claire et lisible

--------------------------------------------------

FONCTIONNEMENT

1. Le service se connecte à RabbitMQ
2. Il s’abonne aux événements diffusés sur l’exchange
3. Lorsqu’une nouvelle partie commence, le plateau est réinitialisé
4. À chaque coup validé :
   - le coup est rejoué localement
   - Stockfish analyse la position
   - une interprétation lisible est affichée
5. Lorsque la partie se termine, le service s’arrête logiquement

--------------------------------------------------

INTERPRETATION DES SCORES

Les évaluations sont fournies par Stockfish en centipawns.

Règles d’interprétation :
- Score positif : avantage BLANC
- Score négatif : avantage NOIR
- Score proche de zéro : position équilibrée
- Score très élevé : avantage décisif
- Mat détecté : annonce du camp gagnant et du nombre de coups

Exemples :
Avantage BLANC : 0.45 pion
Avantage NOIR : 1.20 pion
Position équilibrée
Mat forcé pour BLANC en 3 coups

--------------------------------------------------

TECHNOLOGIES UTILISEES

- Langage : Python
- Middleware : RabbitMQ
- Moteur d’analyse : Stockfish
- Bibliothèques :
  - pika
  - python-chess

--------------------------------------------------

REMARQUES IMPORTANTES

- Le service ne modifie jamais la partie officielle
- Il écoute uniquement les événements validés
- Il peut être lancé ou arrêté sans impacter le jeu
- Plusieurs services d’analyse peuvent être lancés en parallèle

